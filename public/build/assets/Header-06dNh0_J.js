import{j as e,a as A,c as a,r as h,L as i}from"./app-Cssgh3Vw.js";function N({height:t,className:s=""}){return e.jsx(e.Fragment,{children:e.jsx("img",{className:`logo-app ${s}`,src:"/images/logo.png",alt:"Logo ecoAPP",style:{height:t}})})}function P(){const{props:t}=A(),s=t.auth?.user,c=!!s,o=!c,l=!!s?.email_verified_at,d=()=>{a.post("/logout")},n=(r="/login")=>{o&&a.visit(r)},u=(r="/dashboard")=>{c&&a.visit(r)},f=r=>!1,m=r=>!1,p=()=>s?.name?s.name.split(" ").map(r=>r.charAt(0).toUpperCase()).join("").substring(0,2):"",x=()=>[s?.direccion,s?.localidad].filter(Boolean).join(", "),j=()=>!!(s?.name&&s?.email&&s?.direccion&&s?.localidad),g=r=>{console.log(`Adding ${r} points to user ${s?.id}`)},v=()=>{const r=s?.puntos||0;return r>=1e3?"Eco-Experto":r>=500?"Eco-Avanzado":r>=100?"Eco-Intermedio":"Eco-Principiante"};return{user:s,isAuthenticated:c,isGuest:o,isVerified:l,userName:s?.name||"",userEmail:s?.email||"",userPhone:s?.telefono||"",userAddress:s?.direccion||"",userCity:s?.localidad||"",userPoints:s?.puntos||0,fullAddress:x(),initials:p(),hasCompleteProfile:j(),pointsLevel:v(),logout:d,redirectIfGuest:n,redirectIfAuthenticated:u,hasRole:f,can:m,addPoints:g,refresh:()=>a.reload(),goToDashboard:()=>a.visit("/dashboard"),goToProfile:()=>a.visit("/profile")}}const C=()=>{const{user:t,isAuthenticated:s,isGuest:c}=P(),[o,l]=h.useState(!1),d=h.useRef(null);return h.useEffect(()=>{function n(u){d.current&&!d.current.contains(u.target)&&l(!1)}return o?document.addEventListener("mousedown",n):document.removeEventListener("mousedown",n),()=>{document.removeEventListener("mousedown",n)}},[o]),e.jsxs("header",{className:"primary-header",children:[e.jsx(i,{href:"/",children:e.jsx(N,{})}),e.jsx("nav",{children:e.jsxs("ul",{children:[e.jsx("li",{children:e.jsx(i,{href:route("dashboard"),children:"Inicio"})}),s?e.jsxs(e.Fragment,{children:[e.jsx("li",{children:e.jsx(i,{href:route("recolecciones.index"),children:"Recolecciones"})}),e.jsx("li",{children:e.jsx(i,{href:route("profile.edit"),children:"Perfil"})})]}):e.jsxs(e.Fragment,{children:[e.jsx("li",{children:e.jsx(i,{href:route("servicios"),children:"Servicios"})}),e.jsx("li",{children:e.jsx(i,{href:route("contacto"),children:"Contacto"})})]})]})}),e.jsx("div",{className:"auth-section",children:c?e.jsxs(e.Fragment,{children:[e.jsx(i,{className:"link-btn",href:route("login"),children:"Iniciar sesión"}),e.jsx(i,{className:"link-btn",href:route("register"),children:"Registrarse"})]}):e.jsx(e.Fragment,{children:e.jsxs("div",{className:"user-actions",ref:d,children:[e.jsx("div",{className:"notifications",children:e.jsx("img",{src:"/images/notificacion.svg",alt:"Notificaciones"})}),e.jsx("div",{className:"user-avatar",title:t?.name,onClick:()=>l(n=>!n),children:t?.name?t.name.charAt(0).toUpperCase():"U"}),e.jsxs("span",{className:"user-greeting",children:["Hola, ",t?.name.split(" ")[0]]}),e.jsx("div",{className:"dropdown-indicator",onClick:()=>l(n=>!n),children:e.jsx("img",{src:"/images/arrow-down.svg",alt:"Notificaciones"})}),e.jsxs("div",{className:"dropdown-menu",style:{display:o?"flex":"none"},children:[e.jsx(i,{href:route("dashboard"),children:"Dashboard"}),e.jsx(i,{href:route("profile.edit"),children:"Perfil"}),e.jsx(i,{method:"post",href:route("logout"),children:"Cerrar sesión"})]})]})})})]})};export{N as A,C as H,P as u};
